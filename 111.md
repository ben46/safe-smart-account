# 前端

使用react, typescript进行开发

连接钱包使用`ethers`

和后端通信使用restful, 格式是json

# 首页

进入之后有两个大按钮, 我是老板, 我是技术

# 我是技术页面
填写升级内容, 里面包含这几个字段: 
- calldata(长文本输入框)
- 升级内容(长文本输入框)
- 版本号(字符串)
- 提交人的邮箱
- 提交人的名字

# 我是老板页面
老板通过下拉框选择升级内容(下拉框显示版本号, 默认选中一个), 选中之后显示刚刚技术团队填写的那些内容

### 当下拉框选中内容之后, 将会出现

一个列表, 列表里面有三列, 第一列是钱包地址, 第二列是是否已经签名, 第三列是签名时间

一个签名按钮, 点击签名按钮之后会弹出metamask钱包, 对calldata进行签名

### 当签名数量超过3个之后, 将显示

一个按钮, 设置定时任务, 是一个下拉的时间组件, 使用的是UTC+8的时间

# 后端

### signature/add

- to
- value
- data
- operation
- signature
- owner

接收到提交之后

从合约获取dataHash

从合约获取data

调用`checkNSignatures(hash,data,signature,1)`, 通过存入数据库, 不通过返回错误

数据库存

- to
- value
- data
- operation
- signature
- owner
- txData
- txHash(hash of txData)
- id(auto increment)

### signature/exec

TODO 权限权限

- txHash
- execTimeStamp

会从数据库中找出所有的签名order by owner asc, 获取合约上的`getThreshold`, 如果签名数量>threshold, 则插入数据库

写一个轮循, 一分钟轮循一次, 从数据库读取需要定时发布的升级任务



